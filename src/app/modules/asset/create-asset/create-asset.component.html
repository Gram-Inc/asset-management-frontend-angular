<div class="p-8 text-xs">
  <div class="px-4 py-5 bg-white sm:p-6 flex-1 min-w-0">
    <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">Create Asset</h2>
  </div>
</div>

<mat-stepper orientation="vertical" [linear]="true" color="accent" [formGroup]="assetForm">
  <!-- Asset Basic Details -->
  <mat-step [stepControl]="assetForm">
    <ng-template matStepLabel>Asset Type</ng-template>
    <ng-template matStepContent>
      <!-- Asset Type -->
      <div class="px-4 py-5 bg-white sm:p-6 text-xs">
        <div class="grid grid-cols-4 gap-x-6">
          <!-- Asset Code -->
          <mat-form-field appearance="outline" class="col-span-3">
            <mat-label>Asset Code</mat-label>
            <input formControlName="assetCode" matInput />
          </mat-form-field>

          <!-- Type -->
          <mat-form-field class="col-span-2" appearance="outline">
            <mat-label>Asset Type</mat-label>
            <mat-select formControlName="type" (change)="addAssetTypeToAssetForm()">
              <mat-option *ngFor="let ast of types | keyvalue" [value]="ast.value">{{ ast.key }}</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Category -->
          <mat-form-field class="col-span-2" appearance="outline">
            <mat-label>Category</mat-label>
            <mat-select formControlName="category">
              <mat-option *ngFor="let category of categories" [value]="category">{{ category }}</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Vendor -->
          <mat-form-field class="col-span-2" appearance="outline">
            <mat-label>Vendor</mat-label>
            <mat-select [formControlName]="'vendorId'">
              <mat-option [value]="null">N/A</mat-option>
              <mat-option *ngFor="let vnd of vendors$ | async" [value]="vnd._id">{{ vnd?.name }}</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Branch -->
          <mat-form-field class="col-span-2" appearance="outline">
            <mat-label>Branch / Location</mat-label>
            <mat-select [formControlName]="'branch'">
              <mat-option *ngFor="let branch of branchs$ | async" [value]="branch?._id">{{
                branch.name
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <button mat-button matStepperNext>Next</button>
    </ng-template>
  </mat-step>

  <!-- Laptop/PC/Server -->
  <ng-container *ngIf="assetForm.contains('laptop')" formGroupName="laptop">
    <!-- SYSTEM / OS -->
    <mat-step [stepControl]="assetForm.get('laptop')['os']">
      <ng-template matStepLabel>System Information</ng-template>
      <ng-template matStepContent>
        <div class="px-4 py-5 bg-white sm:p-6 text-xs">
          <div class="grid grid-cols-4 gap-x-6">
            <!-- system -->
            <ng-container formGroupName="system">
              <!-- Model NAme -->
              <mat-form-field appearance="outline" class="col-span-3">
                <mat-label>Model Name</mat-label>
                <input formControlName="model" matInput [matAutocomplete]="mName" />
                <mat-autocomplete #mName="matAutocomplete">
                  <mat-option
                    *ngFor="let modelName of filteredModelNameForAutoComplete | async"
                    [value]="modelName"
                  >
                    {{ modelName }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

              <!--Manufacturer -->
              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Manufacturer</mat-label>
                <input formControlName="manufacturer" matInput />
              </mat-form-field>

              <!-- Serial Number -->
              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Serial Number</mat-label>
                <input formControlName="serial" matInput />
              </mat-form-field>
            </ng-container>
            <!-- OS -->
            <ng-container formGroupName="os">
              <!-- Platform -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Platform</mat-label>
                <mat-select formControlName="platform">
                  <mat-option>WINDOWS</mat-option>
                  <mat-option>darwin</mat-option>
                  <mat-option>linux</mat-option>
                </mat-select>
              </mat-form-field>

              <!-- distro -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Distro</mat-label>
                <input formControlName="distro" matInput [matAutocomplete]="os" />
                <mat-autocomplete #os="matAutocomplete">
                  <mat-option *ngFor="let os of filteredOSForAutoComplete | async" [value]="os">
                    {{ os }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

              <!-- arch -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Arch</mat-label>
                <mat-select formControlName="arch">
                  <mat-option [value]="'x64'"> x64 </mat-option>
                  <mat-option [value]="'x32'"> x32 </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- hostname -->
              <mat-form-field class="col-span-4" appearance="outline">
                <mat-label>Hostname</mat-label>
                <input formControlName="hostname" matInput required />
              </mat-form-field>
            </ng-container>
          </div>
        </div>
        <!-- Actions -->
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </ng-template>
    </mat-step>

    <!-- MEM / DISK -->
    <mat-step [stepControl]="assetForm.get('laptop')['diskLayout']">
      <ng-template matStepLabel>System Information</ng-template>
      <ng-template matStepContent>
        <div class="px-4 py-5 bg-white sm:p-6 text-xs">
          <div class="grid grid-cols-4 gap-x-6">
            <!-- Mem -->
            <ng-container formGroupName="mem">
              <!--Manufacturer -->
              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Memory</mat-label>
                <input matInput onchange="" />
              </mat-form-field>
              <mat-form-field appearance="outline" class="col-span-2 invisible">
                <input formControlName="total" matInput />
              </mat-form-field>

              <!-- Serial Number -->
              <mat-form-field appearance="outline" class="col-span-2">
                <mat-label>Serial Number</mat-label>
                <input formControlName="serial" matInput />
              </mat-form-field>
            </ng-container>
            <!-- OS -->
            <ng-container formGroupName="os">
              <!-- Platform -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Platform</mat-label>
                <mat-select formControlName="platform">
                  <mat-option>WINDOWS</mat-option>
                  <mat-option>darwin</mat-option>
                  <mat-option>linux</mat-option>
                </mat-select>
              </mat-form-field>

              <!-- distro -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Distro</mat-label>
                <input formControlName="distro" matInput [matAutocomplete]="os" />
                <mat-autocomplete #os="matAutocomplete">
                  <mat-option *ngFor="let os of filteredOSForAutoComplete | async" [value]="os">
                    {{ os }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>

              <!-- arch -->
              <mat-form-field class="col-span-2" appearance="outline">
                <mat-label>Arch</mat-label>
                <mat-select formControlName="arch">
                  <mat-option [value]="'x64'"> x64 </mat-option>
                  <mat-option [value]="'x32'"> x32 </mat-option>
                </mat-select>
              </mat-form-field>

              <!-- hostname -->
              <mat-form-field class="col-span-4" appearance="outline">
                <mat-label>Hostname</mat-label>
                <input formControlName="hostname" matInput required />
              </mat-form-field>
            </ng-container>
          </div>
        </div>
        <!-- Actions -->
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </ng-template>
    </mat-step>
  </ng-container>
</mat-stepper>
